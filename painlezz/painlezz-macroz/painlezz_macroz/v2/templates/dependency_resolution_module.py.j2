{% for node in dependency_graph.nodes %}
def create_{{ node }}():
    # Factory function for {{ node }}
    dependencies = {
        {% for dep in dependency_graph.predecessors(node) %}
        "{{ dep }}": create_{{ dep }}(),
        {% endfor %}
    }
    return {{ node }}(**dependencies)

{% endfor %}

def resolve_dependencies():
    return {
        {% for node in dependency_graph.nodes %}
        "{{ node }}": create_{{ node }}(),
        {% endfor %}
    }